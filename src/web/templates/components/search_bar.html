<section class="mb-6">
    <div class="card p-4">
        <div class="flex flex-col gap-4">
            <!-- Search Input and Status Filter Row -->
            <div class="flex flex-col md:flex-row gap-4 items-start md:items-center justify-between">
                <div class="flex-1 w-full md:w-auto">
                    <div class="relative">
                        <input
                                type="text"
                                id="searchInput"
                                placeholder="{% if session.role in ['admin', 'technician'] %}Search all rooms, devices, locations, sensor values, or owners...{% else %}Search your rooms, devices, locations, or sensor values...{% endif %}"
                                class="w-full pl-10 pr-10 py-2 bg-secondary border border-border rounded-lg text-text-primary placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-accent-blue focus:border-transparent transition duration-200"
                        >
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-search text-text-muted"></i>
                        </div>
                        <button
                                id="clearSearch"
                                class="absolute inset-y-0 right-0 pr-3 flex items-center text-text-muted hover:text-accent-red transition duration-200 hidden"
                        >
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>

                <!-- Status Filter Dropdown (Admin/Technician only) -->
                {% if session.role in ['admin', 'technician'] %}
                <div class="flex items-center gap-3">
                    <label for="statusFilter" class="text-sm font-medium text-text-secondary whitespace-nowrap">
                        <i class="fas fa-filter mr-2"></i>Filter by Status:
                    </label>
                    <select
                            id="statusFilter"
                            class="bg-secondary border border-border rounded-lg px-3 py-2 text-text-primary focus:outline-none focus:ring-2 focus:ring-accent-blue focus:border-transparent transition duration-200 min-w-[150px]"
                    >
                        <option value="all"><i class="fas fa-layer-group mr-2"></i>All Rooms</option>
                        <option value="normal">
                            <i class="fas fa-check-circle text-accent-green mr-2"></i>Normal
                        </option>
                        <option value="warning">
                            <i class="fas fa-exclamation-triangle text-accent-yellow mr-2"></i>Warning
                        </option>
                        <option value="critical">
                            <i class="fas fa-exclamation-circle text-accent-red mr-2"></i>Critical
                        </option>
                        <option value="no-data">
                            <i class="fas fa-question-circle text-text-muted mr-2"></i>No Data
                        </option>
                    </select>
                </div>
                {% endif %}
            </div>

            <!-- Content Type Filter (Admin/Technician only) -->
            {% if session.role in ['admin', 'technician'] %}
            <div class="flex flex-wrap gap-2 border-t border-border pt-3">
                <span class="text-sm font-medium text-text-secondary mr-2 flex items-center">
                    <i class="fas fa-eye mr-2"></i>Show:
                </span>
                <button
                        id="filterRooms"
                        class="filter-btn active px-4 py-2 rounded-lg text-sm font-medium transition duration-200 bg-accent-blue text-white flex items-center gap-2"
                        data-filter="rooms"
                >
                    <i class="fas fa-door-open"></i>
                    Rooms
                </button>
                <button
                        id="filterReadings"
                        class="filter-btn inactive px-4 py-2 rounded-lg text-sm font-medium transition duration-200 bg-tertiary text-text-secondary hover:bg-tertiary-hover flex items-center gap-2"
                        data-filter="readings"
                >
                    <i class="fas fa-chart-line"></i>
                    Sensor Logs
                </button>
                <button
                        id="filterAll"
                        class="filter-btn inactive px-4 py-2 rounded-lg text-sm font-medium transition duration-200 bg-tertiary text-text-secondary hover:bg-tertiary-hover flex items-center gap-2"
                        data-filter="all"
                >
                    <i class="fas fa-th-large"></i>
                    All
                </button>
            </div>
            {% endif %}
        </div>

        <!-- Search Results Summary -->
        <div id="searchResults" class="mt-3 text-sm text-text-muted hidden flex items-center gap-2">
            <i class="fas fa-info-circle text-accent-blue"></i>
            Found <span id="resultsCount" class="font-semibold text-text-primary mx-1">0</span> results
            <span id="statusSummary" class="ml-2 text-accent-blue font-medium"></span>
        </div>
    </div>
</section>